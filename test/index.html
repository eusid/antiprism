<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>JavaScript Crypto Demo, using JS-RSA and CryptoJS (AES)</title>
  </head>

<link rel="stylesheet" type="text/css" href="main.css" />
<script language="JavaScript" type="text/javascript" src="jquery-2.0.3.min.js"></script>
<script language="JavaScript" type="text/javascript" src="jsbn.js"></script>
<script language="JavaScript" type="text/javascript" src="jsbn2.js"></script>
<script language="JavaScript" type="text/javascript" src="prng4.js"></script>
<script language="JavaScript" type="text/javascript" src="rng.js"></script>
<script language="JavaScript" type="text/javascript" src="rsa.js"></script>
<script language="JavaScript" type="text/javascript" src="rsa2.js"></script>
<script language="JavaScript" type="text/javascript" src="aes.js"></script>
<script language="JavaScript" type="text/javascript" src="CryptJS-core-min.js"></script>
<script language="JavaScript" type="text/javascript" src="scrypt.js"></script>
<script language="JavaScript" type="text/javascript" src="main.js"></script>
<script type="text/javascript">
  function changeButton() {
    if($('#registration').prop('checked')) {
      $('button')[0].innerText = "Sign Up";
    } else {
      $('button')[0].innerText = "Sign In";
    }
  }
  function initMessageField() {
    $('#messageField').keyup(function(e){
      if(e.keyCode == 13) {
          sendMessage();
      }
    });
  }
</script>

  <body onload="initMessageField();">
    <h1>Antiprism Chat</h1>
    <div id="login">
      <span id="usernameRow">Username: <input type="text" id="username"><br></span>
      <span id="passwordRow">Password: <input type="password" id="password"><br></span>
      <span id="checkboxRow">Registrate? <input type="checkbox" id ="registration" name="registration" onclick="changeButton();"></span>
      <button onclick="initWS();">Sign In</button>
    </div>

    <div id="chat" style="display: none;">
      <div id="friendList"></div>      
      <div id="messages"></div>
      <div id="addFriend">
        <input type="text" id="addFriendTextField">
        <button id="addFriendField" onclick="addFriend();">Add Friend</button>
      </div>
      <div id="textField">
        <input type="text" id="messageField">
        <button id="sendButton" onclick="sendMessage();">Send</button>
      </div>
    </div>
  </body>
</html>
